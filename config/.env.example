# ============================================================================
# Agency OS Environment Variables
# ============================================================================
# Copy this file to .env and fill in your values
# Last Updated: December 26, 2024
# ============================================================================

# === Environment ===
ENV=development
DEBUG=false

# === CORS (Production) ===
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000

# ============================================================================
# CORE INFRASTRUCTURE (Required)
# ============================================================================

# === Database (Supabase PostgreSQL) ===
# Transaction Pooler for application (Port 6543)
DATABASE_URL=postgresql+asyncpg://postgres:[PASSWORD]@[PROJECT_REF].supabase.co:6543/postgres
# Session Pooler for migrations (Port 5432)
DATABASE_URL_MIGRATIONS=postgresql://postgres:[PASSWORD]@[PROJECT_REF].supabase.co:5432/postgres

# === Supabase ===
SUPABASE_URL=https://[PROJECT_REF].supabase.co
SUPABASE_KEY=your_anon_key
SUPABASE_SERVICE_KEY=your_service_role_key

# === Redis (Upstash - Caching Only) ===
REDIS_URL=redis://default:[PASSWORD]@[HOST]:6379

# === Prefect (Workflow Orchestration) ===
# Local development:
PREFECT_API_URL=http://localhost:4200/api
# For Railway deployment (set in Railway dashboard):
# PREFECT_API_URL=https://prefect-server-production-xxxx.up.railway.app/api

# Prefect Server Database (optional - for self-hosted Prefect server)
# If not set, Prefect uses SQLite (not recommended for production)
# PREFECT_API_DATABASE_CONNECTION_URL=postgresql://postgres:[PASSWORD]@[HOST]:5432/prefect

# ============================================================================
# AI / LLM (Required)
# ============================================================================

# === Anthropic (Claude) ===
# Used for: ICP extraction, messaging generation, intent classification
# Get key: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-...
ANTHROPIC_DAILY_SPEND_LIMIT=50.0

# ============================================================================
# LEAD ENRICHMENT (Required for ICP + Lead Sourcing)
# ============================================================================

# === Apollo.io ===
# Used for: Lead sourcing, contact enrichment, company data
# Get key: https://developer.apollo.io/
APOLLO_API_KEY=your_apollo_key

# === Apify ===
# Used for: Website scraping for ICP extraction
# Get key: https://console.apify.com/account/integrations
APIFY_API_KEY=your_apify_key

# === Prospeo (Email Finder - Waterfall Step 2) ===
# Used for: Email finding in enrichment waterfall (after Apollo, before Clay)
# Get key: https://prospeo.io/dashboard/api
# Cost: ~$0.03 per lookup

# === Clay (Optional - Fallback Enrichment) ===
# Used for: Waterfall enrichment when Apollo misses data
# Get key: https://app.clay.com/settings/api
CLAY_API_KEY=your_clay_key

# === DataForSEO (SEO Metrics Enrichment) ===
# Used for: Domain authority, organic traffic, backlinks for ALS scoring
# Get credentials: https://app.dataforseo.com/api-dashboard
# Cost: ~$0.01 per domain lookup
DATAFORSEO_LOGIN=your_email@example.com
DATAFORSEO_PASSWORD=your_api_key

# ============================================================================
# EMAIL CHANNEL
# ============================================================================

# === Resend (Primary) ===
# Used for: Sending outreach emails, transactional emails
# Get key: https://resend.com/api-keys
RESEND_API_KEY=re_...

# === Postmark (Reply Detection) ===
# Used for: Inbound email parsing, reply webhooks
# Get key: https://account.postmarkapp.com/servers
POSTMARK_SERVER_TOKEN=your_postmark_token

# ============================================================================
# SMS CHANNEL
# ============================================================================

# === Twilio ===
# Used for: SMS outreach, SMS replies
# Get credentials: https://console.twilio.com/
TWILIO_ACCOUNT_SID=AC...
TWILIO_AUTH_TOKEN=your_auth_token
TWILIO_PHONE_NUMBER=+61...

# ============================================================================
# LINKEDIN CHANNEL
# ============================================================================

# === HeyReach ===
# Used for: LinkedIn connection requests, LinkedIn messaging
# Get key: Contact HeyReach for API access
HEYREACH_API_KEY=your_heyreach_key

# ============================================================================
# VOICE CHANNEL (Vapi + Twilio + ElevenLabs)
# ============================================================================
# Note: Vapi handles STT in-house, no Deepgram needed

# === Vapi ===
# Used for: Voice AI orchestration (STT built-in, routes to Claude, TTS via ElevenLabs)
# Get key: https://vapi.ai (free $10 credit on signup)
VAPI_API_KEY=your_vapi_key
# Phone number ID from Vapi dashboard (linked Twilio number)
VAPI_PHONE_NUMBER_ID=your_vapi_phone_id

# === ElevenLabs ===
# Used for: High-quality voice synthesis (TTS)
# Get key: https://elevenlabs.io
ELEVENLABS_API_KEY=your_elevenlabs_key

# ============================================================================
# DIRECT MAIL CHANNEL (Australian - ClickSend)
# ============================================================================

# === ClickSend ===
# Used for: Physical direct mail campaigns (letters, postcards)
# Australian company - native AU support, no minimums
# Get credentials: https://dashboard.clicksend.com/account/subaccounts
CLICKSEND_USERNAME=your_email@example.com
CLICKSEND_API_KEY=your_clicksend_api_key

# ============================================================================
# PAYMENTS & BILLING
# ============================================================================

# === Stripe ===
# Used for: Subscription billing, payment processing
# Get keys: https://dashboard.stripe.com/apikeys
STRIPE_API_KEY=sk_...
STRIPE_PUBLISHABLE_KEY=pk_...
STRIPE_WEBHOOK_SECRET=whsec_...

# Stripe Price IDs (create these in Stripe Dashboard)
STRIPE_PRICE_IGNITION=price_...
STRIPE_PRICE_VELOCITY=price_...
STRIPE_PRICE_DOMINANCE=price_...

# ============================================================================
# CALENDAR / MEETINGS
# ============================================================================

# === Cal.com (Optional) ===
# Used for: Meeting booking links
# Get key: https://app.cal.com/settings/developer/api-keys
CALCOM_API_KEY=cal_...

# === Calendly (Alternative) ===
# Used for: Meeting booking links
# Get key: https://calendly.com/integrations/api_webhooks
CALENDLY_API_KEY=your_calendly_key

# ============================================================================
# WEB SEARCH (Phase 12B - Deferred)
# ============================================================================

# === Serper (Google Search API) ===
# Used for: Industry research when ICP confidence is low
# Get key: https://serper.dev/
# Cost: $0.01/search (cheaper than Tavily)
SERPER_API_KEY=your_serper_key

# ============================================================================
# MONITORING & ERROR TRACKING
# ============================================================================

# === Sentry ===
# Used for: Error tracking, performance monitoring
# Get DSN: Settings > Projects > [project] > Client Keys (DSN)
SENTRY_DSN=https://xxx@o123.ingest.sentry.io/456
# Get token: Settings > Auth Tokens (for Claude to query Sentry API)
SENTRY_AUTH_TOKEN=sntryu_...

# ============================================================================
# ANALYTICS (Frontend)
# ============================================================================

# === PostHog (Optional) ===
# Used for: Product analytics, user behavior tracking
# Get key: https://app.posthog.com/project/settings
NEXT_PUBLIC_POSTHOG_KEY=phc_...
NEXT_PUBLIC_POSTHOG_HOST=https://app.posthog.com

# ============================================================================
# DEVELOPMENT TOOLS
# ============================================================================

# === ngrok (Local Webhooks) ===
# Used for: Testing webhooks locally
# Get token: https://dashboard.ngrok.com/
NGROK_AUTHTOKEN=your_ngrok_token

# ============================================================================
# SECURITY
# ============================================================================

# === Webhook HMAC ===
# Used for: Signing outbound webhooks to client systems
# Generate: openssl rand -hex 32
WEBHOOK_HMAC_SECRET=your_hmac_secret

# === JWT (if needed) ===
# Generate: openssl rand -hex 64
JWT_SECRET=your_jwt_secret

# ============================================================================
# RATE LIMITS (Defaults - can override)
# ============================================================================

RATE_LIMIT_LINKEDIN_PER_SEAT=17
RATE_LIMIT_EMAIL_PER_DOMAIN=50
RATE_LIMIT_SMS_PER_NUMBER=100

# ============================================================================
# ENRICHMENT CONFIG (Defaults - can override)
# ============================================================================

ENRICHMENT_CONFIDENCE_THRESHOLD=0.70
ENRICHMENT_CLAY_MAX_PERCENTAGE=0.15

# ============================================================================
# LIVE UX TESTING (Phase 15)
# ============================================================================
# These are used when running live end-to-end tests
# See: tests/live/.env.live

# TESTER_EMAIL=your-real-email@gmail.com
# TESTER_PHONE=+61412345678
# TESTER_FIRST_NAME=Dave
# TESTER_LAST_NAME=Test
# TESTER_COMPANY=Test Agency Pty Ltd
# TEST_WEBSITE_URL=https://some-real-agency-website.com
# SKIP_SENDS=false
# CLEANUP_AFTER=true

# ============================================================================
# UI GENERATION (Phase 21)
# ============================================================================

# === Plasmic (Visual Design Platform) ===
# Used for: Visual component design and code generation
# Get tokens: https://studio.plasmic.app/ → Code button
NEXT_PUBLIC_PLASMIC_PROJECT_ID=your_project_id
NEXT_PUBLIC_PLASMIC_PROJECT_API_TOKEN=your_plasmic_api_token
PLASMIC_PREVIEW_SECRET=your_preview_secret

# === v0.dev (DEPRECATED - use Plasmic) ===
# V0_API_KEY=v1:...

# ============================================================================
# EMAIL INFRASTRUCTURE (Phase 18)
# ============================================================================

# === InfraForge (Domains & Mailboxes) ===
# Used for: Programmatic domain purchasing, mailbox provisioning, DNS management
# Get key: https://app.infraforge.ai → Settings → API
# Docs: https://api.infraforge.ai/public/swagger/index.html
INFRAFORGE_API_KEY=your_infraforge_api_key
INFRAFORGE_API_URL=https://api.infraforge.ai/public

# === Warmforge (Email Warmup) ===
# Used for: Automated email warmup to build sender reputation
# Get key: https://app.warmforge.ai → Settings → API
# Docs: https://api.warmforge.ai/public/swagger
# Note: FREE with Salesforge subscription
WARMFORGE_API_KEY=your_warmforge_api_key
WARMFORGE_API_URL=https://api.warmforge.ai/public

# === Salesforge (Campaign Sending) ===
# Used for: Cold email campaign sending, reply tracking, sender rotation
# Get key: https://app.salesforge.ai → Settings → API
# Docs: https://api.salesforge.ai/public/v2/swagger
SALESFORGE_API_KEY=your_salesforge_api_key
SALESFORGE_API_URL=https://api.salesforge.ai/public/v2

# ============================================================================
# RESIDENTIAL PROXY (Tier 3 Scraper - Camoufox)
# ============================================================================
# Used for: Cloudflare bypass when Tier 1 (raw fetch) and Tier 2 (Playwright) fail
# Recommended providers: WebShare, IPRoyal, Bright Data
# Only needed if targeting sites with aggressive bot protection

# Proxy connection settings
RESIDENTIAL_PROXY_HOST=
RESIDENTIAL_PROXY_PORT=
RESIDENTIAL_PROXY_USERNAME=
RESIDENTIAL_PROXY_PASSWORD=

# Enable/disable Camoufox Tier 3 scraper (requires proxy config above)
CAMOUFOX_ENABLED=false

# Scraper timeout in milliseconds (default: 45000 = 45 seconds)
SCRAPER_TIMEOUT_MS=45000

# ============================================================================
# SUPABASE AUTH (JWT Verification)
# ============================================================================
# Required for verifying JWT tokens from Supabase Auth
# Get from: Supabase Dashboard → Project Settings → API → JWT Secret
SUPABASE_JWT_SECRET=your_jwt_secret

# ============================================================================
# CREDENTIAL ENCRYPTION (Phase 24H - LinkedIn Credentials)
# ============================================================================
# Used for: Encrypting LinkedIn credentials at rest using Fernet (AES-256)
# Generate: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# IMPORTANT: Store securely, never commit to repo, backup safely
CREDENTIAL_ENCRYPTION_KEY=your_fernet_key_here
