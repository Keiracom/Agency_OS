# UX Audit: Mock Data vs Live Data
**Date:** 2026-01-04
**Auditor:** Claude Code
**Scope:** Frontend pages, API routes, data flow analysis

---

## Executive Summary

| Category | Live | Mock | Partial | Total |
|----------|------|------|---------|-------|
| Dashboard Pages | 2 | 0 | 1 | 3 |
| Campaign Pages | 3 | 0 | 0 | 3 |
| Lead Pages | 2 | 0 | 0 | 2 |
| Onboarding Pages | 2 | 0 | 0 | 2 |
| Admin Pages | 0 | 10+ | 0 | 10+ |
| Backend API Routes | 10 | 0 | 2 | 12 |

**Overall Assessment:**
- **Client-facing dashboard: 90% LIVE** - Uses real API hooks and database queries
- **Admin dashboard: 100% MOCK** - All pages use hardcoded mock data, despite backend APIs existing
- **Backend APIs: 95% LIVE** - Most query real database, a few placeholder values

### Critical Gap Identified
The **Admin Dashboard** frontend pages (`/admin/*`) use **hardcoded mock data** even though the backend APIs exist and return real data. This is the highest-priority fix needed.

---

## Part 1: Frontend Audit

### Dashboard Pages

| File | Data Source | API Endpoint | Status |
|------|-------------|--------------|--------|
| `app/dashboard/page.tsx` | API hooks | `/api/v1/clients/{id}/reports/*` | ✅ Live |
| `app/dashboard/layout.tsx` | Supabase direct | Supabase Auth + memberships table | ✅ Live |
| `app/dashboard/settings/page.tsx` | API hooks | `/api/v1/clients/{id}` | ✅ Live |
| `app/dashboard/reports/page.tsx` | API hooks | `/api/v1/clients/{id}/reports/*` | ✅ Live |

**Hooks Used:**
- `useDashboardStats()` - Calls `getDashboardStats(clientId)`
- `useActivityFeed()` - Calls `getActivityFeed(clientId)`
- `useALSDistribution()` - Calls `getALSDistribution(clientId)`

**Loading/Error States:** ✅ Implemented via `TableSkeleton`, `ErrorState`, `EmptyState` components

---

### Campaign Pages

| File | Data Source | API Endpoint | Status |
|------|-------------|--------------|--------|
| `app/dashboard/campaigns/page.tsx` | API hooks | `/api/v1/clients/{id}/campaigns` | ✅ Live |
| `app/dashboard/campaigns/[id]/page.tsx` | API hooks | `/api/v1/clients/{id}/campaigns/{id}` | ✅ Live |
| `app/dashboard/campaigns/new/page.tsx` | API hooks | `POST /api/v1/campaigns` | ⚠️ Partial |

**Notes:**
- `campaigns/new/page.tsx` has a hardcoded `CLIENT_ID = "mock-client-id"` on line 31
- Should use `useClient()` hook instead

**Hooks Used:**
- `useCampaigns()` - Paginated list with filters
- `useCampaign(id)` - Single campaign fetch
- `useActivateCampaign()`, `usePauseCampaign()` - Status mutations

**Loading/Error States:** ✅ Implemented

---

### Lead Pages

| File | Data Source | API Endpoint | Status |
|------|-------------|--------------|--------|
| `app/dashboard/leads/page.tsx` | API hooks | `/api/v1/clients/{id}/leads` | ✅ Live |
| `app/dashboard/leads/[id]/page.tsx` | API hooks | `/api/v1/clients/{id}/leads/{id}` | ✅ Live |

**Hooks Used:**
- `useLeads()` - Paginated list with search/filter
- `useLead(id)` - Single lead fetch
- `useLeadActivities(id)` - Activity timeline
- `useALSDistribution()` - ALS tier summary cards

**Loading/Error States:** ✅ Implemented with proper empty states

---

### Onboarding Pages

| File | Data Source | API Endpoint | Status |
|------|-------------|--------------|--------|
| `app/onboarding/page.tsx` | Backend API | `/api/v1/onboarding/analyze`, `/status/{id}`, `/confirm` | ✅ Live |
| `app/onboarding/skip/page.tsx` | Supabase direct | Direct `clients` table update | ✅ Live |

**Notes:**
- Full ICP extraction flow calls real backend
- Uses polling for status updates
- Skip page writes default ICP values directly to Supabase

**Loading/Error States:** ✅ Multi-step progress UI implemented

---

### Admin Pages (CRITICAL - ALL MOCK)

| File | Data Source | API Endpoint | Status |
|------|-------------|--------------|--------|
| `app/admin/page.tsx` | **MOCK** | Should use `/api/v1/admin/stats` | ❌ Mock |
| `app/admin/clients/page.tsx` | **MOCK** | Should use `/api/v1/admin/clients` | ❌ Mock |
| `app/admin/clients/[id]/page.tsx` | **MOCK** | Should use `/api/v1/admin/clients/{id}` | ❌ Mock |
| `app/admin/activity/page.tsx` | **MOCK** | Should use `/api/v1/admin/activity` | ❌ Mock |
| `app/admin/costs/page.tsx` | **MOCK** | No endpoint exists | ❌ Mock |
| `app/admin/costs/ai/page.tsx` | **MOCK** | No endpoint exists | ❌ Mock |
| `app/admin/revenue/page.tsx` | **MOCK** | No endpoint exists | ❌ Mock |
| `app/admin/system/page.tsx` | **MOCK** | Should use `/api/v1/admin/system/status` | ❌ Mock |
| `app/admin/compliance/page.tsx` | **MOCK** | No endpoint exists | ❌ Mock |
| `app/admin/leads/page.tsx` | **MOCK** | No endpoint exists | ❌ Mock |
| `app/admin/campaigns/page.tsx` | **MOCK** | No endpoint exists | ❌ Mock |

**Example Mock Data Found:**
```typescript
// app/admin/page.tsx lines 22-30
const mockKPIs = {
  mrr: 47500,
  mrrChange: 12,
  activeClients: 19,
  newClients: 2,
  leadsToday: 1247,
  aiSpend: 89,
  aiLimit: 500,
};
```

```typescript
// app/admin/clients/page.tsx lines 54-122
const mockClients: Client[] = [
  {
    id: "1",
    name: "LeadGen Pro",
    tier: "dominance",
    mrr: 999,
    status: "active",
    // ...hardcoded data
  },
  // ...more hardcoded clients
];
```

**Loading/Error States:** ❌ Using `Suspense` but no real async fetching

---

## Part 2: API Routes Audit

### Backend Route Files

```
src/api/routes/
├── __init__.py        # Router exports
├── admin.py           # 30KB - Admin endpoints
├── campaign_generation.py # AI campaign generation
├── campaigns.py       # 33KB - Campaign CRUD
├── health.py          # Health check
├── leads.py           # 22KB - Lead CRUD
├── meetings.py        # Meeting booking
├── onboarding.py      # ICP extraction
├── patterns.py        # Conversion patterns
├── replies.py         # Reply handling
├── reports.py         # Metrics/analytics
├── webhooks.py        # Inbound webhooks
└── webhooks_outbound.py # Outbound webhooks
```

### Admin Routes Status

| Endpoint | Method | Queries DB | Status |
|----------|--------|------------|--------|
| `/api/v1/admin/stats` | GET | ✅ Yes | ⚠️ Partial (AI spend placeholder) |
| `/api/v1/admin/activity` | GET | ✅ Yes | ✅ Live |
| `/api/v1/admin/alerts` | GET | ✅ Yes | ✅ Live |
| `/api/v1/admin/system/status` | GET | ✅ Partial | ⚠️ Partial (Redis/Prefect placeholder) |
| `/api/v1/admin/clients` | GET | ✅ Yes | ✅ Live |
| `/api/v1/admin/clients/{id}` | GET | ✅ Yes | ✅ Live |
| `/api/v1/admin/ai-spend` | GET | ❌ | ❌ Not implemented |
| `/api/v1/admin/revenue` | GET | ❌ | ❌ Not implemented |

### Client-Facing Routes Status

| Endpoint | Method | Queries DB | Status |
|----------|--------|------------|--------|
| `/api/v1/clients/{id}/campaigns` | GET/POST | ✅ Yes | ✅ Live |
| `/api/v1/clients/{id}/campaigns/{id}` | GET/PUT/DELETE | ✅ Yes | ✅ Live |
| `/api/v1/clients/{id}/leads` | GET/POST | ✅ Yes | ✅ Live |
| `/api/v1/clients/{id}/leads/{id}` | GET/PUT/DELETE | ✅ Yes | ✅ Live |
| `/api/v1/clients/{id}/reports/dashboard` | GET | ✅ Yes | ✅ Live |
| `/api/v1/clients/{id}/activities` | GET | ✅ Yes | ✅ Live |
| `/api/v1/clients/{id}/reports/als-distribution` | GET | ✅ Yes | ✅ Live |
| `/api/v1/onboarding/analyze` | POST | ✅ Yes | ✅ Live |
| `/api/v1/onboarding/status/{id}` | GET | ✅ Yes | ✅ Live |
| `/api/v1/onboarding/confirm` | POST | ✅ Yes | ✅ Live |

### RLS Considerations

All client-facing routes enforce multi-tenancy via:
1. `ClientContext` dependency extracts `client_id` from JWT
2. All queries include `WHERE client_id = :client_id`
3. Supabase RLS policies as additional protection

---

## Part 3: Data Flow Gaps

### Gap 1: Admin Frontend Uses Mock Data
**Severity:** HIGH

| Frontend Page | Backend API Exists | Frontend Calls It |
|---------------|-------------------|-------------------|
| `/admin` (Command Center) | ✅ `/admin/stats` | ❌ No |
| `/admin/clients` | ✅ `/admin/clients` | ❌ No |
| `/admin/activity` | ✅ `/admin/activity` | ❌ No |
| `/admin/system` | ✅ `/admin/system/status` | ❌ No |

**Impact:** Admin sees fake data, can't monitor real platform health.

### Gap 2: Missing Admin API Endpoints
**Severity:** MEDIUM

| Feature | Frontend Mock Exists | Backend API Exists |
|---------|---------------------|-------------------|
| AI Spend Dashboard | ✅ Mock | ❌ No |
| Revenue Tracking | ✅ Mock | ❌ No |
| Compliance/Suppression | ✅ Mock | ⚠️ Partial |
| Global Leads View | ✅ Mock | ❌ No |
| Global Campaigns View | ✅ Mock | ❌ No |

### Gap 3: Partial Implementations
**Severity:** LOW

| Backend API | Issue |
|-------------|-------|
| `/admin/stats` | `ai_spend_today` and `mrr_change` are hardcoded placeholders |
| `/admin/system/status` | Redis and Prefect checks are placeholders |

### Gap 4: New Campaign Page Uses Mock Client ID
**Severity:** MEDIUM

File: `app/dashboard/campaigns/new/page.tsx:31`
```typescript
const CLIENT_ID = "mock-client-id";  // Should use useClient() hook
```

---

## Part 4: Recommendations

### Backend Tasks Needed

| Task ID | Description | File | Priority |
|---------|-------------|------|----------|
| BE-001 | Implement real AI spend tracking (Redis) | `src/api/routes/admin.py` | P1 |
| BE-002 | Add `/admin/ai-spend` endpoint with breakdown | `src/api/routes/admin.py` | P1 |
| BE-003 | Add `/admin/revenue` endpoint | `src/api/routes/admin.py` | P2 |
| BE-004 | Add global leads endpoint (`/admin/leads`) | `src/api/routes/admin.py` | P2 |
| BE-005 | Add global campaigns endpoint (`/admin/campaigns`) | `src/api/routes/admin.py` | P2 |
| BE-006 | Implement real Redis health check | `src/api/routes/admin.py` | P3 |
| BE-007 | Implement real Prefect API health check | `src/api/routes/admin.py` | P3 |

### Frontend Tasks Needed

| Task ID | Description | File | Priority |
|---------|-------------|------|----------|
| FE-001 | Connect Admin Command Center to `/admin/stats` | `app/admin/page.tsx` | P1 |
| FE-002 | Connect Admin Clients to `/admin/clients` | `app/admin/clients/page.tsx` | P1 |
| FE-003 | Connect Admin Activity to `/admin/activity` | `app/admin/activity/page.tsx` | P1 |
| FE-004 | Connect System Status to `/admin/system/status` | `app/admin/system/page.tsx` | P1 |
| FE-005 | Create admin hooks (`useAdminStats`, `useAdminClients`) | `hooks/use-admin.ts` | P1 |
| FE-006 | Fix new campaign page mock client ID | `app/dashboard/campaigns/new/page.tsx` | P2 |
| FE-007 | Add admin API client functions | `lib/api/admin.ts` | P1 |

### Database/RLS Tasks Needed

| Task ID | Description | Priority |
|---------|-------------|----------|
| DB-001 | Create `ai_usage_log` table for spend tracking | P2 |
| DB-002 | Add RLS policies for admin-only tables | P2 |
| DB-003 | Create `revenue_events` table for MRR tracking | P3 |

---

## Phase 18 Recommended Task Order

### Week 1: Connect Admin to Real Data
1. **FE-005**: Create `hooks/use-admin.ts` with hooks for admin endpoints
2. **FE-007**: Create `lib/api/admin.ts` with API functions
3. **FE-001**: Replace mock data in Admin Command Center
4. **FE-002**: Replace mock data in Admin Clients page
5. **FE-003**: Replace mock data in Admin Activity page

### Week 2: Complete Admin Dashboard
1. **BE-001**: Implement Redis-based AI spend tracking
2. **BE-002**: Add `/admin/ai-spend` endpoint
3. **FE-004**: Connect System Status page
4. **FE-006**: Fix campaign creation mock client ID

### Week 3: Extended Admin Features
1. **BE-003**: Revenue tracking endpoint
2. **BE-004**: Global leads endpoint
3. **BE-005**: Global campaigns endpoint
4. Connect corresponding frontend pages

---

## Appendix: Files Audited

### Frontend Files
- `frontend/app/dashboard/page.tsx`
- `frontend/app/dashboard/layout.tsx`
- `frontend/app/dashboard/campaigns/page.tsx`
- `frontend/app/dashboard/campaigns/new/page.tsx`
- `frontend/app/dashboard/leads/page.tsx`
- `frontend/app/onboarding/page.tsx`
- `frontend/app/onboarding/skip/page.tsx`
- `frontend/app/admin/page.tsx`
- `frontend/app/admin/layout.tsx`
- `frontend/app/admin/clients/page.tsx`
- `frontend/hooks/use-reports.ts`
- `frontend/hooks/use-campaigns.ts`
- `frontend/hooks/use-leads.ts`
- `frontend/hooks/use-client.ts`
- `frontend/lib/api/index.ts`
- `frontend/lib/api/reports.ts`

### Backend Files
- `src/api/routes/__init__.py`
- `src/api/routes/admin.py`
- `src/api/routes/campaigns.py`
- `src/api/routes/leads.py`
- `src/api/routes/reports.py`
- `src/api/routes/onboarding.py`

---

*Generated by Claude Code - 2026-01-04*
